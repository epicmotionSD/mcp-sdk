{"version":3,"sources":["../../src/logger/index.ts"],"names":[],"mappings":"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","file":"index.mjs","sourcesContent":["export type LogLevel = 'debug' | 'info' | 'warn' | 'error'\n\nexport interface LogEntry {\n  timestamp?: string\n  level: LogLevel\n  service: string\n  message: string\n  [key: string]: unknown\n}\n\nexport interface LoggerOptions {\n  /** Minimum log level to output (default: 'info') */\n  level?: LogLevel\n  /** Custom output function (default: console methods) */\n  output?: (entry: LogEntry) => void\n  /** Include timestamps (default: true) */\n  timestamps?: boolean\n  /** Pretty print JSON (default: false, use true for local dev) */\n  pretty?: boolean\n}\n\nconst LEVEL_PRIORITY: Record<LogLevel, number> = {\n  debug: 0,\n  info: 1,\n  warn: 2,\n  error: 3,\n}\n\n/**\n * Creates a structured logger for MCP servers\n */\nexport function createLogger(service: string, options: LoggerOptions = {}) {\n  const {\n    level: minLevel = 'info',\n    timestamps = true,\n    pretty = false,\n  } = options\n\n  const shouldLog = (level: LogLevel): boolean => {\n    return LEVEL_PRIORITY[level] >= LEVEL_PRIORITY[minLevel]\n  }\n\n  const formatEntry = (entry: LogEntry): string => {\n    return pretty ? JSON.stringify(entry, null, 2) : JSON.stringify(entry)\n  }\n\n  const log = (level: LogLevel, message: string, data?: Record<string, unknown>) => {\n    if (!shouldLog(level)) return\n\n    const entry: LogEntry = {\n      ...(timestamps && { timestamp: new Date().toISOString() }),\n      level,\n      service,\n      message,\n      ...data,\n    }\n\n    if (options.output) {\n      options.output(entry)\n    } else {\n      const formatted = formatEntry(entry)\n      switch (level) {\n        case 'debug':\n          console.debug(formatted)\n          break\n        case 'info':\n          console.info(formatted)\n          break\n        case 'warn':\n          console.warn(formatted)\n          break\n        case 'error':\n          console.error(formatted)\n          break\n      }\n    }\n\n    return entry\n  }\n\n  return {\n    debug: (message: string, data?: Record<string, unknown>) => log('debug', message, data),\n    info: (message: string, data?: Record<string, unknown>) => log('info', message, data),\n    warn: (message: string, data?: Record<string, unknown>) => log('warn', message, data),\n    error: (message: string, data?: Record<string, unknown>) => log('error', message, data),\n    \n    /**\n     * Create a child logger with additional context\n     */\n    child: (context: Record<string, unknown>) => {\n      return createLogger(service, {\n        ...options,\n        output: (entry) => {\n          const merged = { ...entry, ...context }\n          if (options.output) {\n            options.output(merged)\n          } else {\n            const formatted = pretty ? JSON.stringify(merged, null, 2) : JSON.stringify(merged)\n            console[entry.level](formatted)\n          }\n        },\n      })\n    },\n  }\n}\n\nexport type Logger = ReturnType<typeof createLogger>\n"]}