{"version":3,"sources":["../../src/config/index.ts","../../src/demo/index.ts","../../src/telemetry/index.ts"],"names":["DEMO_PREFIX"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @openconductor/mcp-sdk - Global Configuration\n * \n * Single source of truth for SDK mode (demo vs production)\n */\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport interface OpenConductorConfig {\n  /** OpenConductor API key (optional in demo mode) */\n  apiKey?: string\n  /** Force demo mode even if API key is provided */\n  demoMode?: boolean\n  /** Server name for telemetry */\n  serverName?: string\n  /** Server version */\n  serverVersion?: string\n  /** Suppress demo mode banner */\n  quiet?: boolean\n}\n\nexport interface ResolvedConfig {\n  apiKey: string | null\n  demoMode: boolean\n  serverName: string\n  serverVersion: string\n  initialized: boolean\n}\n\n// ============================================================================\n// State\n// ============================================================================\n\nlet globalConfig: ResolvedConfig = {\n  apiKey: null,\n  demoMode: false,\n  serverName: 'mcp-server',\n  serverVersion: '0.0.0',\n  initialized: false,\n}\n\n// ============================================================================\n// Demo Mode Banner\n// ============================================================================\n\nconst DEMO_BANNER = `\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                                                                 ‚îÇ\n‚îÇ   üéÆ  DEMO MODE ACTIVE                                          ‚îÇ\n‚îÇ                                                                 ‚îÇ\n‚îÇ   The SDK is running without an API key.                        ‚îÇ\n‚îÇ   ‚Ä¢ Payment: Mock billing (always allowed, 9999 credits)        ‚îÇ\n‚îÇ   ‚Ä¢ Telemetry: Logging to console only                          ‚îÇ\n‚îÇ   ‚Ä¢ All features work - no data sent to OpenConductor           ‚îÇ\n‚îÇ                                                                 ‚îÇ\n‚îÇ   To enable production mode:                                    ‚îÇ\n‚îÇ   1. Get a free API key at https://openconductor.ai             ‚îÇ\n‚îÇ   2. Set OPENCONDUCTOR_API_KEY environment variable             ‚îÇ\n‚îÇ      or pass apiKey to initOpenConductor()                      ‚îÇ\n‚îÇ                                                                 ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n`\n\nconst PRODUCTION_BANNER = `\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   ‚úÖ  OpenConductor SDK initialized (production mode)           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n`\n\n// ============================================================================\n// Initialization\n// ============================================================================\n\n/**\n * Initialize the OpenConductor SDK\n * \n * Call this once at startup. If no API key is provided (via config or \n * OPENCONDUCTOR_API_KEY env var), the SDK automatically enables Demo Mode.\n * \n * @example Production mode\n * ```typescript\n * initOpenConductor({\n *   apiKey: process.env.OPENCONDUCTOR_API_KEY,\n *   serverName: 'my-server',\n *   serverVersion: '1.0.0'\n * })\n * ```\n * \n * @example Demo mode (explicit)\n * ```typescript\n * initOpenConductor({ demoMode: true })\n * ```\n * \n * @example Demo mode (auto-detected)\n * ```typescript\n * // No API key? Demo mode activates automatically\n * initOpenConductor({ serverName: 'my-server' })\n * ```\n */\nexport function initOpenConductor(config: OpenConductorConfig = {}): ResolvedConfig {\n  // Resolve API key from config or environment\n  const apiKey = config.apiKey ?? process.env.OPENCONDUCTOR_API_KEY ?? null\n  \n  // Determine demo mode\n  // Demo if: explicitly set OR no API key provided\n  const demoMode = config.demoMode === true || !apiKey\n  \n  globalConfig = {\n    apiKey: demoMode ? null : apiKey,\n    demoMode,\n    serverName: config.serverName ?? process.env.OPENCONDUCTOR_SERVER_NAME ?? 'mcp-server',\n    serverVersion: config.serverVersion ?? process.env.npm_package_version ?? '0.0.0',\n    initialized: true,\n  }\n  \n  // Print banner unless quiet\n  if (!config.quiet) {\n    if (demoMode) {\n      console.log(DEMO_BANNER)\n    } else {\n      console.log(PRODUCTION_BANNER)\n    }\n  }\n  \n  return globalConfig\n}\n\n/**\n * Get current SDK configuration\n * Auto-initializes in demo mode if not already initialized\n */\nexport function getConfig(): ResolvedConfig {\n  if (!globalConfig.initialized) {\n    // Auto-init in demo mode for zero-config experience\n    return initOpenConductor({ quiet: true })\n  }\n  return globalConfig\n}\n\n/**\n * Check if SDK is in demo mode\n */\nexport function isDemoMode(): boolean {\n  return getConfig().demoMode\n}\n\n/**\n * Check if SDK is initialized\n */\nexport function isInitialized(): boolean {\n  return globalConfig.initialized\n}\n\n/**\n * Reset configuration (mainly for testing)\n */\nexport function resetConfig(): void {\n  globalConfig = {\n    apiKey: null,\n    demoMode: false,\n    serverName: 'mcp-server',\n    serverVersion: '0.0.0',\n    initialized: false,\n  }\n}\n","/**\n * @openconductor/mcp-sdk - Demo Mode Mock Data\n * \n * Realistic sample data for zero-config demo experience\n */\n\nimport type { BillingStatus, UsageAnalytics, CreditPackInfo, CreditPack } from '../payment'\nimport type { ToolMetric } from '../telemetry'\n\n// ============================================================================\n// Mock Billing Data\n// ============================================================================\n\nexport const MOCK_BILLING_STATUS: BillingStatus = {\n  allowed: true,\n  credits: 9999,\n  tier: 'demo',\n  reason: undefined,\n  actionUrl: 'https://openconductor.ai/pricing',\n}\n\nexport const MOCK_USER_BILLING = {\n  credits: 9999,\n  tier: 'demo',\n  active: true,\n}\n\nexport const MOCK_CREDIT_PACKS: Record<CreditPack, CreditPackInfo> = {\n  starter: {\n    name: 'Starter Pack',\n    credits: 100,\n    price: 9.99,\n    perCredit: 0.0999,\n    savings: 0,\n    bestFor: 'Testing and small projects',\n  },\n  pro: {\n    name: 'Pro Pack',\n    credits: 500,\n    price: 39.99,\n    perCredit: 0.0799,\n    savings: 20,\n    bestFor: 'Growing projects',\n    popular: true,\n  },\n  business: {\n    name: 'Business Pack',\n    credits: 2000,\n    price: 119.99,\n    perCredit: 0.0599,\n    savings: 40,\n    bestFor: 'Production workloads',\n  },\n}\n\n// ============================================================================\n// Mock Analytics Data\n// ============================================================================\n\nfunction generateMockTimeline(days: number): Array<{ date: string; used: number; purchased: number }> {\n  const timeline: Array<{ date: string; used: number; purchased: number }> = []\n  const now = new Date()\n  \n  for (let i = days - 1; i >= 0; i--) {\n    const date = new Date(now)\n    date.setDate(date.getDate() - i)\n    timeline.push({\n      date: date.toISOString().split('T')[0],\n      used: Math.floor(Math.random() * 50) + 10,\n      purchased: i % 7 === 0 ? 500 : 0, // Weekly purchases\n    })\n  }\n  \n  return timeline\n}\n\nfunction generateMockTransactions(count: number): UsageAnalytics['recentTransactions'] {\n  const tools = ['analyze-data', 'generate-report', 'search-docs', 'summarize', 'translate']\n  const transactions: UsageAnalytics['recentTransactions'] = []\n  const now = new Date()\n  \n  for (let i = 0; i < count; i++) {\n    const isDebit = Math.random() > 0.2\n    const date = new Date(now)\n    date.setHours(date.getHours() - i * 2)\n    \n    transactions.push({\n      id: `txn_demo_${i}`,\n      amount: isDebit ? -(Math.floor(Math.random() * 20) + 1) : 500,\n      type: isDebit ? 'usage' : 'purchase',\n      tool: isDebit ? tools[Math.floor(Math.random() * tools.length)] : null,\n      createdAt: date.toISOString(),\n    })\n  }\n  \n  return transactions\n}\n\nexport function getMockAnalytics(period: '24h' | '7d' | '30d' | 'all'): UsageAnalytics {\n  const days = period === '24h' ? 1 : period === '7d' ? 7 : period === '30d' ? 30 : 90\n  const timeline = generateMockTimeline(days)\n  const totalUsed = timeline.reduce((sum, d) => sum + d.used, 0)\n  const totalPurchased = timeline.reduce((sum, d) => sum + d.purchased, 0)\n  \n  return {\n    period,\n    balance: 9999,\n    summary: {\n      totalUsed,\n      totalPurchased,\n      netChange: totalPurchased - totalUsed,\n      burnRate: totalUsed / days,\n      daysRemaining: Math.floor(9999 / (totalUsed / days)),\n      toolCount: 5,\n      transactionCount: days * 3,\n    },\n    topTools: [\n      { tool: 'analyze-data', calls: 156, credits: 780 },\n      { tool: 'generate-report', calls: 89, credits: 445 },\n      { tool: 'search-docs', calls: 234, credits: 234 },\n      { tool: 'summarize', calls: 67, credits: 335 },\n      { tool: 'translate', calls: 45, credits: 90 },\n    ],\n    usageTimeline: timeline,\n    recentTransactions: generateMockTransactions(10),\n  }\n}\n\n// ============================================================================\n// Mock Telemetry Data\n// ============================================================================\n\nexport function createMockMetric(tool: string, duration: number, success: boolean): ToolMetric {\n  return {\n    tool,\n    duration,\n    success,\n    error: success ? undefined : 'Mock error for demo',\n    timestamp: new Date().toISOString(),\n  }\n}\n\n// ============================================================================\n// Demo Console Logger\n// ============================================================================\n\nconst DEMO_PREFIX = '[üéÆ DEMO]'\n\nexport const demoLogger = {\n  telemetry: (action: string, data: Record<string, unknown>) => {\n    console.log(`${DEMO_PREFIX} Telemetry ${action}:`, JSON.stringify(data, null, 2))\n  },\n  \n  payment: (action: string, data: Record<string, unknown>) => {\n    console.log(`${DEMO_PREFIX} Payment ${action}:`, JSON.stringify(data, null, 2))\n  },\n  \n  billing: (userId: string, result: BillingStatus) => {\n    console.log(`${DEMO_PREFIX} Billing check for ${userId}: ALLOWED (demo mode)`)\n  },\n  \n  deduct: (userId: string, credits: number, tool: string) => {\n    console.log(`${DEMO_PREFIX} Would deduct ${credits} credits from ${userId} for ${tool} (skipped in demo)`)\n  },\n}\n","import { getConfig, isDemoMode } from '../config'\nimport { demoLogger } from '../demo'\n\nexport interface TelemetryConfig {\n  /** Your OpenConductor API key */\n  apiKey: string\n  /** Server name for identification */\n  serverName: string\n  /** Server version */\n  serverVersion?: string\n  /** Custom endpoint (default: OpenConductor production) */\n  endpoint?: string\n  /** Batch size before flushing (default: 10) */\n  batchSize?: number\n  /** Flush interval in ms (default: 30000) */\n  flushInterval?: number\n  /** Enable debug logging (default: false) */\n  debug?: boolean\n}\n\nexport interface ToolMetric {\n  tool: string\n  duration: number\n  success: boolean\n  error?: string\n  timestamp: string\n}\n\nexport interface TelemetryBatch {\n  serverName: string\n  serverVersion?: string\n  metrics: ToolMetric[]\n  meta: {\n    sdkVersion: string\n    nodeVersion: string\n    platform: string\n  }\n}\n\nconst SDK_VERSION = '1.0.0'\nconst DEFAULT_ENDPOINT = 'https://api.openconductor.ai/functions/v1/telemetry'\n\nlet globalTelemetry: Telemetry | DemoTelemetry | null = null\n\n/**\n * Initialize telemetry for your MCP server\n * \n * In demo mode, this is optional - telemetry will log to console instead of API.\n * Call this once at startup with your OpenConductor API key for production.\n */\nexport function initTelemetry(config?: TelemetryConfig): Telemetry | DemoTelemetry {\n  const sdkConfig = getConfig()\n  \n  // In demo mode, create a demo telemetry instance\n  if (isDemoMode()) {\n    globalTelemetry = new DemoTelemetry(\n      config?.serverName ?? sdkConfig.serverName,\n      config?.serverVersion ?? sdkConfig.serverVersion\n    )\n    return globalTelemetry\n  }\n  \n  // Production mode - require config\n  if (!config?.apiKey) {\n    throw new Error('Telemetry requires apiKey in production mode. Set OPENCONDUCTOR_API_KEY or pass apiKey to initTelemetry().')\n  }\n  \n  globalTelemetry = new Telemetry(config)\n  return globalTelemetry\n}\n\n/**\n * Get the global telemetry instance (if initialized)\n */\nexport function getTelemetry(): Telemetry | DemoTelemetry | null {\n  return globalTelemetry\n}\n\n\nexport class Telemetry {\n  private config: Required<Omit<TelemetryConfig, 'serverVersion'>> & Pick<TelemetryConfig, 'serverVersion'>\n  protected buffer: ToolMetric[] = []\n  private flushTimer: ReturnType<typeof setInterval> | null = null\n\n  constructor(config: TelemetryConfig) {\n    this.config = {\n      apiKey: config.apiKey,\n      serverName: config.serverName,\n      serverVersion: config.serverVersion,\n      endpoint: config.endpoint ?? DEFAULT_ENDPOINT,\n      batchSize: config.batchSize ?? 10,\n      flushInterval: config.flushInterval ?? 30000,\n      debug: config.debug ?? false,\n    }\n\n    // Start periodic flush\n    this.flushTimer = setInterval(() => {\n      this.flush().catch(this.handleError.bind(this))\n    }, this.config.flushInterval)\n\n    // Flush on process exit\n    if (typeof process !== 'undefined') {\n      process.on('beforeExit', () => this.flush())\n      process.on('SIGINT', () => {\n        this.flush().finally(() => process.exit(0))\n      })\n      process.on('SIGTERM', () => {\n        this.flush().finally(() => process.exit(0))\n      })\n    }\n\n    this.log('Telemetry initialized', { serverName: config.serverName })\n  }\n\n  /**\n   * Track a tool invocation\n   */\n  trackToolCall(\n    tool: string,\n    duration: number,\n    success: boolean,\n    error?: string\n  ): void {\n    const metric: ToolMetric = {\n      tool,\n      duration,\n      success,\n      ...(error && { error }),\n      timestamp: new Date().toISOString(),\n    }\n\n    this.buffer.push(metric)\n    this.log('Metric tracked', { ...metric })\n\n    // Auto-flush if buffer is full\n    if (this.buffer.length >= this.config.batchSize) {\n      this.flush().catch(this.handleError.bind(this))\n    }\n  }\n\n  /**\n   * Flush buffered metrics to OpenConductor\n   */\n  async flush(): Promise<void> {\n    if (this.buffer.length === 0) return\n\n    const metrics = [...this.buffer]\n    this.buffer = []\n\n    const batch: TelemetryBatch = {\n      serverName: this.config.serverName,\n      serverVersion: this.config.serverVersion,\n      metrics,\n      meta: {\n        sdkVersion: SDK_VERSION,\n        nodeVersion: typeof process !== 'undefined' ? process.version : 'unknown',\n        platform: typeof process !== 'undefined' ? process.platform : 'unknown',\n      },\n    }\n\n    this.log('Flushing metrics', { count: metrics.length })\n\n    try {\n      const response = await fetch(this.config.endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${this.config.apiKey}`,\n          'X-OpenConductor-SDK': SDK_VERSION,\n        },\n        body: JSON.stringify(batch),\n      })\n\n      if (!response.ok) {\n        throw new Error(`Telemetry flush failed: ${response.status} ${response.statusText}`)\n      }\n\n      this.log('Metrics flushed successfully', { count: metrics.length })\n    } catch (error) {\n      // Put metrics back in buffer on failure\n      this.buffer.unshift(...metrics)\n      throw error\n    }\n  }\n\n  /**\n   * Stop telemetry collection\n   */\n  shutdown(): void {\n    if (this.flushTimer) {\n      clearInterval(this.flushTimer)\n      this.flushTimer = null\n    }\n    this.flush().catch(this.handleError.bind(this))\n    this.log('Telemetry shutdown')\n  }\n\n  protected log(message: string, data?: Record<string, unknown>): void {\n    if (this.config.debug) {\n      console.debug(JSON.stringify({\n        timestamp: new Date().toISOString(),\n        level: 'debug',\n        service: 'openconductor-telemetry',\n        message,\n        ...data,\n      }))\n    }\n  }\n\n  private handleError(error: unknown): void {\n    if (this.config.debug) {\n      console.error('[OpenConductor Telemetry Error]', error)\n    }\n  }\n}\n\n\n// ============================================================================\n// Demo Telemetry\n// ============================================================================\n\nconst DEMO_PREFIX = '[üéÆ DEMO]'\n\n/**\n * Demo telemetry that logs to console instead of sending to API\n * Automatically used in demo mode\n */\nexport class DemoTelemetry {\n  private serverName: string\n  private serverVersion: string\n  private buffer: ToolMetric[] = []\n\n  constructor(serverName: string, serverVersion?: string) {\n    this.serverName = serverName\n    this.serverVersion = serverVersion ?? '0.0.0'\n    console.log(`${DEMO_PREFIX} Telemetry initialized (console mode) for ${serverName}`)\n  }\n\n  /**\n   * Track a tool invocation - logs to console in demo mode\n   */\n  trackToolCall(\n    tool: string,\n    duration: number,\n    success: boolean,\n    error?: string\n  ): void {\n    const metric: ToolMetric = {\n      tool,\n      duration,\n      success,\n      ...(error && { error }),\n      timestamp: new Date().toISOString(),\n    }\n\n    this.buffer.push(metric)\n\n    // Log to console in demo mode\n    demoLogger.telemetry('track', {\n      tool,\n      duration: `${duration}ms`,\n      success,\n      ...(error && { error }),\n    })\n  }\n\n  /**\n   * Flush - in demo mode, just logs a summary\n   */\n  async flush(): Promise<void> {\n    if (this.buffer.length === 0) return\n\n    const count = this.buffer.length\n\n    // Log summary instead of sending\n    demoLogger.telemetry('flush', {\n      message: `Would send ${count} metrics to OpenConductor`,\n      metrics: this.buffer.slice(0, 3),\n      ...(count > 3 && { more: `...and ${count - 3} more` }),\n    })\n\n    this.buffer = []\n  }\n\n  /**\n   * Shutdown - no-op in demo mode\n   */\n  shutdown(): void {\n    console.log(`${DEMO_PREFIX} Telemetry shutdown`)\n  }\n\n  /**\n   * Get buffered metrics (useful for testing/inspection)\n   */\n  getBuffer(): ToolMetric[] {\n    return [...this.buffer]\n  }\n}\n"]}